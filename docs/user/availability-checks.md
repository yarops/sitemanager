# Функционал проверок доступности сайтов

## Обзор

Система мониторинга сайтов позволяет автоматически отслеживать работоспособность ваших ресурсов. Теперь вы можете настраивать частоту проверок для каждого сайта индивидуально и выбирать удобный способ уведомления о сбоях.

## Настройка мониторинга

Для каждого сайта в панели управления доступны следующие параметры:

1. **Мониторинг включен (Check enabled)**: Главный переключатель. Если выключен, проверки не проводятся.
2. **Интервал проверки (Check interval)**: Как часто заходить на сайт. Доступные варианты:
   - **5 минут**: Рекомендуется для критически важных сайтов.
   - **15 минут / 1 час / 6 часов / 12 часов**.
   - **1 день**: Для сайтов с низкой активностью (по умолчанию).
3. **Стратегия уведомлений (Notification strategy)**:
   - **Мгновенно (Immediate)**: Как только сайт перестанет отвечать 200 OK, вы немедленно получите сообщение в Telegram. Рекомендуется для самых важных проектов.
   - **Ежедневный отчет (Summary)**: Оптимально для большого количества второстепенных сайтов. Проверки идут по расписанию, но алерты не приходят по каждому случаю. Вместо этого раз в сутки (утром) вы получаете одно сообщение со списком всех «упавших» за вчерашний день сайтов.
   - **Отключено**: Проверки проводятся, история сохраняется в базе, но никаких уведомлений в Telegram не отправляется.

## Как это работает (для пользователей)

### 1. Автоматический запуск
Как только вы нажимаете "Сохранить" после изменения настроек мониторинга, система немедленно планирует ближайшую проверку. Вам не нужно ждать следующего дня или часа.

### 2. Результаты проверок
Результаты каждой проверки сохраняются в базе. Вы можете увидеть:
- **Текущий статус**: UP (работает), DOWN (ошибка), REDIRECT (перенаправление).
- **Время отклика**: Как быстро загружается сайт (в миллисекундах).
- **Текст ошибки**: Если сайт упал, система сохранит код ошибки (например, 404 или 500) или сообщение о проблемах с соединением.

### 3. История проверок
В карточке каждого сайта в основном списке есть кнопка "История проверок", где можно посмотреть подробный лог за всё время.

## Фильтрация сайтов в списке

Для удобства работы в общем списке предусмотрены быстрые фильтры по статусу:
- **Включен**: Показать все сайты, где работает мониторинг.
- **Работает (UP)**: Только доступные сайты.
- **Не работает (DOWN)**: Сайты с ошибками (требуют внимания).
- **Не проверялся**: Новые сайты, для которых еще не накопилась статистика.

## Техническая справка

Система использует асинхронную обработку через очереди задач. Это означает, что проверки не замедляют работу основной панели управления. Каждая проверка выполняется "в фоне" специальным скриптом-планировщиком, который запускается каждую минуту.

**Рекомендация:** Если сайт важен для бизнеса, используйте интервал **5 минут** и стратегию **Мгновенно**. Для вспомогательных ресурсов достаточно **1 дня** и **Ежедневного отчета**.
